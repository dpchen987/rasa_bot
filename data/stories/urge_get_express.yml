version: "3.1"

# 登记流程
stories:

# 催取件流程
- story: urge_to_get_express 1
  steps:
    - intent: urge_to_get_express
    - action: utter_get_express_appease
    - checkpoint: get_express_ckp_1

- story: urge_to_get_express, has phone number
  steps:
    - checkpoint: get_express_ckp_1
    - action: action_set_slot_phone_key
    - slot_was_set:
        - slot_phone_key: 1
    - action: utter_register_has_signed_appease    # 登记成功
    - action: utter_guide_to_end_has_workorder    # 结束前询问
    - action: action_set_slot_guide_to_end          # 对引导结束话术进行标记
    - action: action_session_start

- story: urge_to_get_express, has no number
  steps:
    - checkpoint: get_express_ckp_1
    - action: action_set_slot_phone_key
    - slot_was_set:
        - slot_phone_key: 0
    - action: utter_ask_phone_appease    # 要电话，安抚
    - action: action_session_start



# 登记加急处理
- story: urge_to_get_express 2
  steps:
    - intent: inform
    - action: action_set_inform_key
    - slot_was_set:
        - slot_order_id_latest_key: 1
    - action: utter_get_express_appease
    - checkpoint: get_express_ckp_2

- story: urge_to_get_express, has phone number
  steps:
    - checkpoint: get_express_ckp_2
    - action: action_set_slot_phone_key
    - slot_was_set:
        - slot_phone_key: 1
    - action: utter_register_has_signed_appease    # 登记成功
    - action: utter_guide_to_end_has_workorder    # 结束前询问
    - action: action_set_slot_guide_to_end          # 对引导结束话术进行标记
    - action: action_session_start

- story: urge_to_get_express, has no number
  steps:
    - checkpoint: get_express_ckp_2
    - action: action_set_slot_phone_key
    - slot_was_set:
        - slot_phone_key: 0
    - action: utter_ask_phone_appease    # 要电话，安抚
    - action: action_session_start