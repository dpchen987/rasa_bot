version: "3.1"

rules:

  # 查看快递状态激活表单
  - rule: check express status
    steps:
      - or:
        - intent: check_express_status
        - intent: has_sent_or_not
        - intent: pretend_sent
        - intent: if_has_lost
      - action: action_form_count_rollback
      - action: collect_express_id_form
      - active_loop: collect_express_id_form

  # 提交表单查看快递状态
  - rule: submit form and check express status
    condition:
    - active_loop: collect_express_id_form   # this form must be active
    steps:
      - action: collect_express_id_form      # run the form
      - active_loop: null   
      - slot_was_set:         # the form is no longer active because it has been filled
        - slot_main_intent: check_express_status
      - action: action_check_express_status         # action to take after the form is complete
      - action: action_session_start