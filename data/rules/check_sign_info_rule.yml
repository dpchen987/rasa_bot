version: "3.1"
# 查询签收信息，包括：是否签收？谁签收的？是我签收的吗？签收时间？

# stories:
# 已签收或者未签收，用户认可查询结果，正常结束
# - story: check sign info
#   steps:
#     - intent: check_sign_info
#     - action: collect_express_id_form
#     - active_loop: collect_express_id_form
#     - active_loop: null
#     - action: action_check_sign_info
#     - action: action_session_start

rules:

  # 查看快递到达时间激活表单
  - rule: check sign info
    steps:
      - intent: check_sign_info
      - action: action_form_count_rollback
      - action: collect_express_id_form
      - active_loop: collect_express_id_form

  # 提交表单查看快递到达时间
  - rule: submit form and check sign info
    condition:
    - active_loop: collect_express_id_form   # this form must be active
    steps:
      - action: collect_express_id_form      # run the form
      - active_loop: null   
      - slot_was_set:         # the form is no longer active because it has been filled
        - slot_main_intent: check_sign_info
      - action: action_check_sign_info         # action to take after the form is complete
      - action: action_session_start